<section id="shop" style="padding: 4rem 2rem;">
    <div class="breadcrumbs">
        <a href="/" class="breadcrumb-link">Home</a>
        <span class="breadcrumb-separator">/</span>
        <a href="/Shop" class="breadcrumb-link">Shop</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current">All Products</span>
    </div>

    <!-- Product-Row -->
    <div class="row mt-4">
        <!-- Left Column - Filters -->
        <div class="col-md-3">
            <h5>Filters</h5>
            <div>
                <label><input type="checkbox" /> Backpacks</label><br />
                <label><input type="checkbox" /> Coolers</label><br />
                <label><input type="checkbox" /> Drawstring Bags</label><br />
            </div>
        </div>

        <!-- Right Column - Product Grid of 4 in a row -->
        <div class="col-md-9" style="padding-left: 1rem;">
            <div class="row" style="display: flex; flex-wrap: wrap; gap: 2rem;">
                @foreach (var product in Model)
                {
                    <div class="carousel-card">
                        <img src="@product.ImageUrl" alt="@product.ImageAltText" />
                        <div class="product-name">@product.Name</div>
                        <div class="product-footer">
                            <span class="price">@product.Price</span>
                            <button class="add-to-cart">
                                <i class="fas fa-shopping-cart"></i> Add to cart
                            </button>
                        </div>
                    </div>
                }
            </div>
            <div class="pagination">
                @if (ViewBag.CurrentPage > 1)
                {
                    <a href="@Url.Action("Shop", new { page = ViewBag.CurrentPage - 1 })" class="page-nav">&#10094;</a>
                }

                <!-- Always show first page -->
                <a href="@Url.Action("Shop", new { page = 1 })" class="page-circle @(ViewBag.CurrentPage == 1 ? "active" : "")">1</a>

                <!-- Leading ellipsis -->
                @if (ViewBag.CurrentPage > 4)
                {
                    <span class="page-circle">...</span>
                }

                <!-- Pages around current -->
                @for (int i = ViewBag.CurrentPage - 2; i <= ViewBag.CurrentPage + 2; i++)
                {
                    if (i > 1 && i < ViewBag.TotalPages - 2)
                    {
                        <a href="@Url.Action("Shop", new { page = i })" class="page-circle @(ViewBag.CurrentPage == i ? "active" : "")">@i</a>
                    }
                }

                <!-- Trailing ellipsis -->
                @if (ViewBag.CurrentPage < ViewBag.TotalPages - 4)
                {
                    <span class="page-circle">...</span>
                }

                <!-- Always show last 3 pages -->
                @for (int i = ViewBag.TotalPages - 2; i <= ViewBag.TotalPages; i++)
                {
                    if (i > 1)
                    {
                        <a href="@Url.Action("Shop", new { page = i })" class="page-circle @(ViewBag.CurrentPage == i ? "active" : "")">@i</a>
                    }
                }

                @if (ViewBag.CurrentPage < ViewBag.TotalPages)
                {
                    <a href="@Url.Action("Shop", new { page = ViewBag.CurrentPage + 1 })" class="page-nav">&#10095;</a>
                }
            </div>
        </div>
    </div>
</section>


